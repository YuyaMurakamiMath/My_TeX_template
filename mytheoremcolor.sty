% --------------------------------------------------------------------------
%	パッケージ
% --------------------------------------------------------------------------

\usepackage{tcolorbox} % 定理環境に枠を付けるために必要
\tcbuselibrary{breakable, skins, theorems} % 定理環境に枠を付けるために必要

% --------------------------------------------------------------------------
%	定理環境
% --------------------------------------------------------------------------

%% 定理環境
%mythmオプションの定義（定理環境のタネ）
\definecolor{burgundy}{rgb}{0.5, 0.0, 0.13}
\tcbset{mythm/.style={fonttitle=\gtfamily\sffamily\bfseries\upshape,
		enhanced,%%%tikzを用いた記法の処理
		colframe=burgundy,%%%本文の枠の色
		colback=burgundy!2!white,%%%本文の背景色
		colbacktitle=burgundy,%%%タイトルの背景の色
		boxrule=0pt,%%%枠線の太さ
		borderline south={2pt}{-2pt}{burgundy},
		left*=1\zw,right*=1\zw,%%%box内左右の余白
		theorem style=standard,
		breakable,%%%ページマタギOK
		sharp corners,%%%左上の角の調整 
		before skip=8pt,
		after skip=10pt,
		before upper={\setlength{\parindent}{1\zw}},
		before lower={\setlength{\parindent}{1\zw}}
}}
%定理
\newtcbtheorem[number within=section]{thm}{定理}%
{mythm}{th}
\newcommand{\thref}[1]{{\bfseries\sffamily 定理 \ref{th:#1}}}
%命題
\newtcbtheorem[use counter from=thm]{prop}{命題}%
{mythm}{pr}
\newcommand{\prref}[1]{{\bfseries\sffamily 命題 \ref{pr:#1}}}
%系
\newtcbtheorem[use counter from=thm]{cor}{系}%
{mythm}{co}
%予想
\newtcbtheorem[use counter from=thm]{conj}{予想}%
{mythm}{con}
\newcommand{\conref}[1]{{\bfseries\sffamily 予想 \ref{con:#1}}}
%質問
\newtcbtheorem[use counter from=thm]{que}{疑問}%
{mythm}{qu}
\newcommand{\quref}[1]{{\bfseries\sffamily 疑問 \ref{qu:#1}}}

%定義
\newtcbtheorem[use counter from=thm]{dfn}{定義}%
{mythm,
	colframe=blue!30!black,%%%本文の枠の色
	colback=blue!30!black!2!white,%%%本文の背景色
	colbacktitle=blue!30!black,%%%タイトルの背景の色
	borderline south={2pt}{-2pt}{blue!30!black},
}{de}
\newcommand{\deref}[1]{{\bfseries\sffamily 定義 \ref{de:#1}}}
%記号
\newtcbtheorem{nota}{記号}%
{mythm,
	theorem name,%定理番号を付けない
	colframe=blue!30!black,%%%本文の枠の色
	colback=blue!30!black!2!white,%%%本文の背景色
	colbacktitle=blue!30!black,%%%タイトルの背景の色
	borderline south={2pt}{-2pt}{blue!30!black},
}{no}

%補題
\newtcbtheorem[use counter from=thm]{lem}{補題}%
{mythm,
	colframe=green!30!black,%%%本文の枠の色
	colback=green!30!black!2!white,%%%本文の背景色
	colbacktitle=green!30!black,%%%タイトルの背景の色
	borderline south={2pt}{-2pt}{green!30!black},
}{le}
\newcommand{\leref}[1]{{\bfseries\sffamily 補題 \ref{le:#1}}}
%注意
\newtcbtheorem[use counter from=thm]{rem}{注意}%
{mythm,
	colframe=green!30!black,%%%本文の枠の色
	colback=green!30!black!2!white,%%%本文の背景色
	colbacktitle=green!30!black,%%%タイトルの背景の色
	borderline south={2pt}{-2pt}{green!30!black},
}{re}
\newcommand{\reref}[1]{{\bfseries\sffamily 注意 \ref{re:#1}}}
%主張
\newtcbtheorem[use counter from=thm]{clm}{主張}%
{mythm,
	colframe=green!30!black,%%%本文の枠の色
	colback=green!30!black!2!white,%%%本文の背景色
	colbacktitle=green!30!black,%%%タイトルの背景の色
	borderline south={2pt}{-2pt}{green!30!black},
}{cl}
\newcommand{\clref}[1]{{\bfseries\sffamily 主張 \ref{cl:#1}}}
%例
\newtcbtheorem[use counter from=thm]{ex}{例}%
{mythm,
	colframe=green!30!black,%%%本文の枠の色
	colback=green!30!black!2!white,%%%本文の背景色
	colbacktitle=green!30!black,%%%タイトルの背景の色
	borderline south={2pt}{-2pt}{green!30!black},
}{ex}
\newcommand{\exref}[1]{{\bfseries\sffamily 例 \ref{ex:#1}}}
%観察
\newtcbtheorem{obs}{観察}%
{mythm,
	theorem name,%定理番号を付けない
	colframe=green!30!black,%%%本文の枠の色
	colback=green!30!black!2!white,%%%本文の背景色
	colbacktitle=green!30!black,%%%タイトルの背景の色
	borderline south={2pt}{-2pt}{green!30!black},
}{ob}

%演習問題
\definecolor{charcoal}{rgb}{0.21, 0.27, 0.31}
\newtcbtheorem[number within=chapter]{exc}{演習問題}%
{mythm,colframe=charcoal,colback=charcoal!2!white,colbacktitle=charcoal,borderline south={2pt}{-2pt}{charcoal},}{exc}
\newcommand{\excref}[1]{{\bfseries\sffamily 質問 \ref{exc:#1}}}
%\newtcbtheorem[use counter from=thm]{example}{例}%
%{mythm,
%	colframe=charcoal,colback=charcoal!2!white,colbacktitle=charcoal,borderline south={2pt}{-2pt}{charcoal},}{ex}
%\newcommand{\exref}[1]{{\bfseries\sffamily 例 \ref{ex:#1}}}

%証明
\renewcommand{\proofname}{\bf 証明}

% --------------------------------------------------------------------------
%	枠囲み
% --------------------------------------------------------------------------

%simplesquarebox環境の定義. \begin{simplesquarebox}{} \end{simplesquarebox}とすることで囲み枠の環境が使える
\tcbuselibrary{xparse} %preamble
\DeclareTColorBox{simplesquarebox}{ o m O{.5} O{} }% 
{empty, left=2mm, right=2mm, top=-1mm, attach boxed title to top left={xshift=1.2\zw},
	boxed title style={empty,left=-2mm,right=-2mm}, colframe=black, coltitle=black, coltext=black, breakable,  
	underlay unbroken={\draw[black,line width=#3pt]
		(title.east) -- (title.east-|frame.east) -- (frame.south east) -- (frame.south west) -- (title.west-|frame.west) -- (title.west); },
	underlay first={\draw[black,line width=#3pt](title.east) -- (title.east-|frame.east) -- (frame.south east) ;
		\draw[black,line width=#3pt] (frame.south west) -- (title.west-|frame.west) -- (title.west); },
	underlay middle={\draw[black,line width=#3pt](frame.north east) -- (frame.south east) ;
		\draw[black,line width=#3pt](frame.south west) -- (frame.north west) ;},
	underlay last={\draw[black,line width=#3pt](frame.north east) -- (frame.south east) -- (frame.south west) -- (frame.north west) ;},
	fonttitle=\gtfamily, IfValueTF={#1}{title=【#2】〈#1〉}{title=【#2】},#4}

%%セクションタイトルの枠
%\usepackage{xpatch}
%\xpatchcmd{\section}{\normalfont\Large\bfseries}{\sectionbox}{}{\PatchFailed}
%\newcommand{\sectionbox}[1] {
%	\begin{tcolorbox}
%		[
%		colframe=purple,%%%本文の枠の色
%		colback=purple!100,%%%本文の背景色
%		coltext=white, % text color
%		width=\linewidth,%
%		height=0.7cm, 
%		halign=center,
%		valign=center,
%		fontupper=\large\bfseries,
%		arc=0mm, auto outer arc,
%		]
%		{#1}
%	\end{tcolorbox} 
%} %

% --------------------------------------------------------------------------